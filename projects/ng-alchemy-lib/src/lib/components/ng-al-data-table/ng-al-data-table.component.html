<div class="data-table-container">
	<table>
		<thead [ngStyle]="{ width: dimensions?.width }">
			<tr>
				<th *ngIf="showCheckboxes">
					<ng-al-checkbox [checked]="topCheckboxChecked" (onCheckboxClicked)="onTopCheckboxClicked($event)"> </ng-al-checkbox>
				</th>
				<th *ngFor="let column of columns" [ngClass]="{ contentAlignmentConfig: true, 'column-header': !!sortingConfig[column.key] }">
					<div class="column-name-and-sorting-icons">
						<span class="column-name">{{ column.label }}</span>
						<fa class="icon" name="sort-{{ sortingConfig[column.key].direction }}" *ngIf="!!sortingConfig[column.key]"></fa>
					</div>
					<div class="column-options">
						<fa class="icon" name="cog"></fa>
					</div>
				</th>
			</tr>
		</thead>
		<tbody [ngStyle]="dimensions">
			<ng-container *ngFor="let row of rows">
				<tr>
					<td *ngIf="showCheckboxes">
						<ng-al-checkbox [checked]="row.checked" (onCheckboxClicked)="onCheckboxClicked($event, row)"> </ng-al-checkbox>
					</td>
					<td *ngFor="let column of columns" [ngClass]="{ contentAlignmentConfig: true }">
						<ng-container
							[ngTemplateOutletContext]="{ row: row, column: column }"
							[ngTemplateOutlet]="editionConfig.isWholeRowEdit ? wholeRowEdit : singleCellEdit"
						></ng-container>
					</td>
				</tr>
			</ng-container>
		</tbody>
	</table>
</div>

<ng-template #wholeRowEdit let-row="row" let-column="column">
	<span (click)="onRowBeingClicked($event, row, column)" *ngIf="!row.edit">{{ row[column.key] }}</span>
	<ng-al-input
		*ngIf="row.edit"
		type="text"
		value="{{ row[column.key] }}"
		(click)="$event.stopPropagation()"
		(valueEmitter)="onBlurTableInputCell($event, row, column, false)"
	></ng-al-input>
</ng-template>

<ng-template #singleCellEdit let-row="row" let-column="column">
	<span (click)="switchEditionState(row, column)" *ngIf="!row[column.key + '_' + row.id]">{{ row[column.key] }}</span>
	<ng-al-input
		type="text"
		[autofocus]="true"
		value="{{ row[column.key] }}"
		*ngIf="row[column.key + '_' + row.id]"
		(valueEmitter)="onBlurTableInputCell($event, row, column)"
	></ng-al-input>
</ng-template>
